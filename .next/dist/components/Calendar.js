'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _style = require('styled-jsx/style.js');

var _style2 = _interopRequireDefault(_style);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _axios = require('axios');

var _axios2 = _interopRequireDefault(_axios);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _jsxFileName = '/Users/robyngreen/Sites/info-screen/components/Calendar.js';

var dev = process.env.NODE_ENV !== 'prod';

var Calendar = function (_React$Component) {
  (0, _inherits3.default)(Calendar, _React$Component);

  function Calendar() {
    (0, _classCallCheck3.default)(this, Calendar);

    // Set defaults.
    var _this = (0, _possibleConstructorReturn3.default)(this, (Calendar.__proto__ || (0, _getPrototypeOf2.default)(Calendar)).call(this));

    _this.state = {
      key: 'AIzaSyDOzStmGXlCBYxgCKLPruGgqQGGxIfnIaI',
      numEvents: 5,
      calendarAPI: 'https://www.googleapis.com/calendar/v3/calendars/e12nasfpqrj49m0qjdqug5u05o%40group.calendar.google.com/events?orderBy=startTime&singleEvents=true',
      events: [],
      week: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
      month: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
    };
    return _this;
  }

  (0, _createClass3.default)(Calendar, [{
    key: 'buildCalendar',
    value: function buildCalendar() {
      var self = this;
      var timeMin = new Date(Date.now()).toISOString();
      var gcalURL = this.state.calendarAPI + '&maxResults=' + this.state.numEvents + '&timeMin=' + timeMin + '&key=' + this.state.key;

      this.serverRequest = _axios2.default.all([_axios2.default.get(gcalURL)]).then(_axios2.default.spread(function (calendar) {
        self.setState({
          events: calendar.data.items
        });
      }));
    }

    /**
     * Precall before render.
     */

  }, {
    key: 'componentWillMount',
    value: function componentWillMount() {
      this.buildCalendar();
    }

    /**
     * Called whenever the component is mounted.
     */

  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {
      var self = this;
      // Only refresh on prod.
      if (!dev) {
        // In milliseconds, so * 1000 to end.
        // 60 minutes * 60 seconds * 1000 milliseconds.
        var refreshTime = 60 * 60 * 1000;
        window.setInterval(function () {
          self.getWeatherData();
        }.bind(this), refreshTime);
      }
    }

    /**
     * Renders markup
     * @return string Any html
     */

  }, {
    key: 'render',
    value: function render() {
      var self = this;
      var today = new Date();
      var todayMonth = today.getMonth() + 1;
      if (todayMonth < 10) {
        todayMonth = '0' + todayMonth;
      }
      var todayDay = today.getDate();
      if (todayDay < 10) {
        todayDay = '0' + todayDay;
      }
      var todayDate = today.getFullYear() + '-' + todayMonth + '-' + todayDay;
      return _react2.default.createElement('div', {
        className: 'jsx-1050363683' + ' ' + 'calendar',
        __source: {
          fileName: _jsxFileName,
          lineNumber: 78
        }
      }, self.state.events.map(function (event) {
        var date = new Date(event.start.date + 'T12:00:00Z');
        var dow = date.getDay();
        var day = date.getDate();
        var month = date.getMonth();
        var todayClass = '';
        if (event.start.date === todayDate) {
          todayClass = 'today';
        }
        return _react2.default.createElement('div', { key: event.id, className: 'jsx-1050363683' + ' ' + (todayClass + ' eventItem' || ''),
          __source: {
            fileName: _jsxFileName,
            lineNumber: 89
          }
        }, _react2.default.createElement('div', {
          className: 'jsx-1050363683' + ' ' + 'eventDate',
          __source: {
            fileName: _jsxFileName,
            lineNumber: 90
          }
        }, self.state.week[dow], ', ', self.state.month[month], ' ', day), _react2.default.createElement('div', {
          className: 'jsx-1050363683' + ' ' + 'eventTitle',
          __source: {
            fileName: _jsxFileName,
            lineNumber: 91
          }
        }, event.summary));
      }), _react2.default.createElement(_style2.default, {
        styleId: '1050363683',
        css: '.calendar.jsx-1050363683{font-family:\'SST-condensed\';color:#fff;margin-top:3em;text-align:right;margin-left:auto;width:95%;}.eventItem.jsx-1050363683{margin-bottom:1.75em;padding:5px 10px 0 0;}.eventDate.jsx-1050363683{font-size:2.25rem;}.eventTitle.jsx-1050363683{font-size:1.5rem;}.today.jsx-1050363683{background:rgba(0,208,255,0.19);border-radius:5px;border:1px solid rgba(255,255,255,0.1);}'
      }));
    }
  }]);

  return Calendar;
}(_react2.default.Component);

exports.default = Calendar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVua25vd24iXSwibmFtZXMiOlsiX2pzeEZpbGVOYW1lIiwiZGV2IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiQ2FsZW5kYXIiLCJfUmVhY3QkQ29tcG9uZW50IiwiX3RoaXMiLCJfX3Byb3RvX18iLCJjYWxsIiwic3RhdGUiLCJrZXkiLCJudW1FdmVudHMiLCJjYWxlbmRhckFQSSIsImV2ZW50cyIsIndlZWsiLCJtb250aCIsInZhbHVlIiwiYnVpbGRDYWxlbmRhciIsInNlbGYiLCJ0aW1lTWluIiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwiZ2NhbFVSTCIsInNlcnZlclJlcXVlc3QiLCJhbGwiLCJnZXQiLCJ0aGVuIiwic3ByZWFkIiwiY2FsZW5kYXIiLCJzZXRTdGF0ZSIsImRhdGEiLCJpdGVtcyIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudERpZE1vdW50IiwicmVmcmVzaFRpbWUiLCJ3aW5kb3ciLCJzZXRJbnRlcnZhbCIsImdldFdlYXRoZXJEYXRhIiwiYmluZCIsInJlbmRlciIsInRvZGF5IiwidG9kYXlNb250aCIsImdldE1vbnRoIiwidG9kYXlEYXkiLCJnZXREYXRlIiwidG9kYXlEYXRlIiwiZ2V0RnVsbFllYXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiX19zb3VyY2UiLCJmaWxlTmFtZSIsImxpbmVOdW1iZXIiLCJtYXAiLCJldmVudCIsImRhdGUiLCJzdGFydCIsImRvdyIsImdldERheSIsImRheSIsInRvZGF5Q2xhc3MiLCJpZCIsInN1bW1hcnkiLCJzdHlsZUlkIiwiY3NzIiwiQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBSEEsSUFBSUEsZUFBZSw0REFBbkI7O0FBSUEsSUFBSUMsTUFBTUMsUUFBUUMsR0FBUixDQUFZQyxRQUFaLEtBQXlCLE1BQW5DOztBQUVB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LFNBRkYsRUFTRWxDLEtBQUtULEtBQUwsQ0FBV0ssSUFBWCxDQUFnQjJDLEdBQWhCLENBVEYsRUFVRSxJQVZGLEVBV0V2QyxLQUFLVCxLQUFMLENBQVdNLEtBQVgsQ0FBaUJBLEtBQWpCLENBWEYsRUFZRSxHQVpGLEVBYUU0QyxHQWJGLENBUkssRUF1QkwsZ0JBQU1YLGFBQU4sQ0FDRSxLQURGLEVBRUU7QUFDRUMscUJBQVcsbUJBQW1CLEdBQW5CLEdBQXlCLFlBRHRDO0FBRUVDLG9CQUFVO0FBQ1JDLHNCQUFVcEQsWUFERjtBQUVScUQsd0JBQVk7QUFGSjtBQUZaLFNBRkYsRUFTRUUsTUFBTVEsT0FUUixDQXZCSyxDQUFQO0FBbUNELE9BNUNELENBVEssRUFzREwsZ0JBQU1kLGFBQU4sa0JBQStCO0FBQzdCZSxpQkFBUyxZQURvQjtBQUU3QkMsYUFBSztBQUZ3QixPQUEvQixDQXRESyxDQUFQO0FBMkREO0FBekVBLEdBaERvQixDQUF2Qjs7QUE0SEEsU0FBTzVELFFBQVA7QUFDRCxDQWpKYyxDQWlKYixnQkFBTTZELFNBakpPLENBQWY7O2tCQW1KZTdELFEiLCJmaWxlIjoidW5rbm93biIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF9PYmplY3QkZ2V0UHJvdG90eXBlT2YgZnJvbSAnYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9nZXQtcHJvdG90eXBlLW9mJztcbmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJztcbmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzJztcbmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybic7XG5pbXBvcnQgX2luaGVyaXRzIGZyb20gJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cyc7XG52YXIgX2pzeEZpbGVOYW1lID0gJy9Vc2Vycy9yb2J5bmdyZWVuL1NpdGVzL2luZm8tc2NyZWVuL2NvbXBvbmVudHMvQ2FsZW5kYXIuanMnO1xuaW1wb3J0IF9KU1hTdHlsZSBmcm9tICdzdHlsZWQtanN4L3N0eWxlJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xudmFyIGRldiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZCc7XG5cbnZhciBDYWxlbmRhciA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gIF9pbmhlcml0cyhDYWxlbmRhciwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gQ2FsZW5kYXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbGVuZGFyKTtcblxuICAgIC8vIFNldCBkZWZhdWx0cy5cbiAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2FsZW5kYXIuX19wcm90b19fIHx8IF9PYmplY3QkZ2V0UHJvdG90eXBlT2YoQ2FsZW5kYXIpKS5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAga2V5OiAnQUl6YVN5RE96U3RtR1hsQ0JZeGdDS0xQcnVHZ3FRR0d4SWZuSWFJJyxcbiAgICAgIG51bUV2ZW50czogNSxcbiAgICAgIGNhbGVuZGFyQVBJOiAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY2FsZW5kYXIvdjMvY2FsZW5kYXJzL2UxMm5hc2ZwcXJqNDltMHFqZHF1ZzV1MDVvJTQwZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbS9ldmVudHM/b3JkZXJCeT1zdGFydFRpbWUmc2luZ2xlRXZlbnRzPXRydWUnLFxuICAgICAgZXZlbnRzOiBbXSxcbiAgICAgIHdlZWs6IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXSxcbiAgICAgIG1vbnRoOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgIH07XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENhbGVuZGFyLCBbe1xuICAgIGtleTogJ2J1aWxkQ2FsZW5kYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBidWlsZENhbGVuZGFyKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHRpbWVNaW4gPSBuZXcgRGF0ZShEYXRlLm5vdygpKS50b0lTT1N0cmluZygpO1xuICAgICAgdmFyIGdjYWxVUkwgPSB0aGlzLnN0YXRlLmNhbGVuZGFyQVBJICsgJyZtYXhSZXN1bHRzPScgKyB0aGlzLnN0YXRlLm51bUV2ZW50cyArICcmdGltZU1pbj0nICsgdGltZU1pbiArICcma2V5PScgKyB0aGlzLnN0YXRlLmtleTtcblxuICAgICAgdGhpcy5zZXJ2ZXJSZXF1ZXN0ID0gYXhpb3MuYWxsKFtheGlvcy5nZXQoZ2NhbFVSTCldKS50aGVuKGF4aW9zLnNwcmVhZChmdW5jdGlvbiAoY2FsZW5kYXIpIHtcbiAgICAgICAgc2VsZi5zZXRTdGF0ZSh7XG4gICAgICAgICAgZXZlbnRzOiBjYWxlbmRhci5kYXRhLml0ZW1zXG4gICAgICAgIH0pO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByZWNhbGwgYmVmb3JlIHJlbmRlci5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50V2lsbE1vdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuICAgICAgdGhpcy5idWlsZENhbGVuZGFyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdoZW5ldmVyIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnY29tcG9uZW50RGlkTW91bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIC8vIE9ubHkgcmVmcmVzaCBvbiBwcm9kLlxuICAgICAgaWYgKCFkZXYpIHtcbiAgICAgICAgLy8gSW4gbWlsbGlzZWNvbmRzLCBzbyAqIDEwMDAgdG8gZW5kLlxuICAgICAgICAvLyA2MCBtaW51dGVzICogNjAgc2Vjb25kcyAqIDEwMDAgbWlsbGlzZWNvbmRzLlxuICAgICAgICB2YXIgcmVmcmVzaFRpbWUgPSA2MCAqIDYwICogMTAwMDtcbiAgICAgICAgd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZWxmLmdldFdlYXRoZXJEYXRhKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgcmVmcmVzaFRpbWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgbWFya3VwXG4gICAgICogQHJldHVybiBzdHJpbmcgQW55IGh0bWxcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIHZhciB0b2RheU1vbnRoID0gdG9kYXkuZ2V0TW9udGgoKSArIDE7XG4gICAgICBpZiAodG9kYXlNb250aCA8IDEwKSB7XG4gICAgICAgIHRvZGF5TW9udGggPSAnMCcgKyB0b2RheU1vbnRoO1xuICAgICAgfVxuICAgICAgdmFyIHRvZGF5RGF5ID0gdG9kYXkuZ2V0RGF0ZSgpO1xuICAgICAgaWYgKHRvZGF5RGF5IDwgMTApIHtcbiAgICAgICAgdG9kYXlEYXkgPSAnMCcgKyB0b2RheURheTtcbiAgICAgIH1cbiAgICAgIHZhciB0b2RheURhdGUgPSB0b2RheS5nZXRGdWxsWWVhcigpICsgJy0nICsgdG9kYXlNb250aCArICctJyArIHRvZGF5RGF5O1xuICAgICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdkaXYnLFxuICAgICAgICB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnanN4LTEwNTAzNjM2ODMnICsgJyAnICsgJ2NhbGVuZGFyJyxcbiAgICAgICAgICBfX3NvdXJjZToge1xuICAgICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSxcbiAgICAgICAgICAgIGxpbmVOdW1iZXI6IDc4XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzZWxmLnN0YXRlLmV2ZW50cy5tYXAoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShldmVudC5zdGFydC5kYXRlICsgJ1QxMjowMDowMFonKTtcbiAgICAgICAgICB2YXIgZG93ID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgIHZhciB0b2RheUNsYXNzID0gJyc7XG4gICAgICAgICAgaWYgKGV2ZW50LnN0YXJ0LmRhdGUgPT09IHRvZGF5RGF0ZSkge1xuICAgICAgICAgICAgdG9kYXlDbGFzcyA9ICd0b2RheSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICB7IGtleTogZXZlbnQuaWQsIGNsYXNzTmFtZTogJ2pzeC0xMDUwMzYzNjgzJyArICcgJyArICh0b2RheUNsYXNzICsgJyBldmVudEl0ZW0nIHx8ICcnKSxcbiAgICAgICAgICAgICAgX19zb3VyY2U6IHtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDg5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2pzeC0xMDUwMzYzNjgzJyArICcgJyArICdldmVudERhdGUnLFxuICAgICAgICAgICAgICAgIF9fc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICBmaWxlTmFtZTogX2pzeEZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgbGluZU51bWJlcjogOTBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNlbGYuc3RhdGUud2Vla1tkb3ddLFxuICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgICBzZWxmLnN0YXRlLm1vbnRoW21vbnRoXSxcbiAgICAgICAgICAgICAgJyAnLFxuICAgICAgICAgICAgICBkYXlcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2pzeC0xMDUwMzYzNjgzJyArICcgJyArICdldmVudFRpdGxlJyxcbiAgICAgICAgICAgICAgICBfX3NvdXJjZToge1xuICAgICAgICAgICAgICAgICAgZmlsZU5hbWU6IF9qc3hGaWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IDkxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBldmVudC5zdW1tYXJ5XG4gICAgICAgICAgICApXG4gICAgICAgICAgKTtcbiAgICAgICAgfSksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoX0pTWFN0eWxlLCB7XG4gICAgICAgICAgc3R5bGVJZDogJzEwNTAzNjM2ODMnLFxuICAgICAgICAgIGNzczogJy5jYWxlbmRhci5qc3gtMTA1MDM2MzY4M3tmb250LWZhbWlseTpcXCdTU1QtY29uZGVuc2VkXFwnO2NvbG9yOiNmZmY7bWFyZ2luLXRvcDozZW07dGV4dC1hbGlnbjpyaWdodDttYXJnaW4tbGVmdDphdXRvO3dpZHRoOjk1JTt9LmV2ZW50SXRlbS5qc3gtMTA1MDM2MzY4M3ttYXJnaW4tYm90dG9tOjEuNzVlbTtwYWRkaW5nOjVweCAxMHB4IDAgMDt9LmV2ZW50RGF0ZS5qc3gtMTA1MDM2MzY4M3tmb250LXNpemU6Mi4yNXJlbTt9LmV2ZW50VGl0bGUuanN4LTEwNTAzNjM2ODN7Zm9udC1zaXplOjEuNXJlbTt9LnRvZGF5LmpzeC0xMDUwMzYzNjgze2JhY2tncm91bmQ6cmdiYSgwLDIwOCwyNTUsMC4xOSk7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMSk7fSdcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENhbGVuZGFyO1xufShSZWFjdC5Db21wb25lbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhcjsiXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVua25vd24iXSwibmFtZXMiOlsiX2pzeEZpbGVOYW1lIiwiZGV2IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiQ2FsZW5kYXIiLCJfUmVhY3QkQ29tcG9uZW50IiwiX3RoaXMiLCJfX3Byb3RvX18iLCJjYWxsIiwic3RhdGUiLCJrZXkiLCJudW1FdmVudHMiLCJjYWxlbmRhckFQSSIsImV2ZW50cyIsIndlZWsiLCJtb250aCIsInZhbHVlIiwiYnVpbGRDYWxlbmRhciIsInNlbGYiLCJ0aW1lTWluIiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwiZ2NhbFVSTCIsInNlcnZlclJlcXVlc3QiLCJhbGwiLCJnZXQiLCJ0aGVuIiwic3ByZWFkIiwiY2FsZW5kYXIiLCJzZXRTdGF0ZSIsImRhdGEiLCJpdGVtcyIsImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudERpZE1vdW50IiwicmVmcmVzaFRpbWUiLCJ3aW5kb3ciLCJzZXRJbnRlcnZhbCIsImdldFdlYXRoZXJEYXRhIiwiYmluZCIsInJlbmRlciIsInRvZGF5IiwidG9kYXlNb250aCIsImdldE1vbnRoIiwidG9kYXlEYXkiLCJnZXREYXRlIiwidG9kYXlEYXRlIiwiZ2V0RnVsbFllYXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiX19zb3VyY2UiLCJmaWxlTmFtZSIsImxpbmVOdW1iZXIiLCJtYXAiLCJldmVudCIsImRhdGUiLCJzdGFydCIsImRvdyIsImdldERheSIsImRheSIsInRvZGF5Q2xhc3MiLCJpZCIsInN1bW1hcnkiLCJzdHlsZUlkIiwiY3NzIiwiQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBSEEsSUFBSUEsZUFBZSw0REFBbkI7O0FBSUEsSUFBSUMsTUFBTUMsUUFBUUMsR0FBUixDQUFZQyxRQUFaLEtBQXlCLE1BQW5DOztBQUVB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